{"version":3,"file":"useTick.js","sources":["../../src/hooks/useTick.ts"],"sourcesContent":["import { invariant } from '../helpers/invariant';\nimport { useApplication } from './useApplication';\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect';\n\nimport type { TickerCallback } from 'pixi.js';\nimport type { UseTickOptions } from '../typedefs/UseTickOptions';\n\n/** Attaches a callback to the application's Ticker. */\nexport function useTick<T>(\n    /** @description The function to be called on each tick. */\n    options: TickerCallback<T> | UseTickOptions<T>,\n\n    /**\n     * @deprecated\n     * @description Whether this callback is currently enabled.\n     */\n    enabled = true,\n)\n{\n    const {\n        app,\n        isInitialised,\n    } = useApplication();\n\n    let callback;\n\n    let context: any;\n\n    let isEnabled = enabled;\n\n    let priority: number | undefined;\n\n    if (typeof options === 'function')\n    {\n        callback = options;\n    }\n    else\n    {\n        callback = options.callback;\n        context = options.context;\n        isEnabled = options.isEnabled ?? true;\n        priority = options.priority;\n    }\n\n    invariant(typeof callback === 'function', '`useTick` needs a callback function.');\n\n    // eslint-disable-next-line consistent-return\n    useIsomorphicLayoutEffect(() =>\n    {\n        if (isInitialised)\n        {\n            const ticker = app?.ticker;\n            const wasEnabled = isEnabled;\n            const previousContext = context;\n            const previousCallback = callback;\n\n            if (isEnabled && ticker)\n            {\n                ticker.add(callback, context, priority);\n            }\n\n            return () =>\n            {\n                if (wasEnabled)\n                {\n                    ticker?.remove(previousCallback, previousContext);\n                }\n            };\n        }\n    }, [\n        callback,\n        context,\n        isEnabled,\n        isInitialised,\n        priority,\n    ]);\n}\n"],"names":["useApplication","invariant","useIsomorphicLayoutEffect"],"mappings":";;;;;;;AAQgB,SAAA,OAAA,CAEZ,OAMA,EAAA,OAAA,GAAU,IAEd,EAAA;AACI,EAAM,MAAA;AAAA,IACF,GAAA;AAAA,IACA,aAAA;AAAA,MACAA,6BAAe,EAAA,CAAA;AAEnB,EAAI,IAAA,QAAA,CAAA;AAEJ,EAAI,IAAA,OAAA,CAAA;AAEJ,EAAA,IAAI,SAAY,GAAA,OAAA,CAAA;AAEhB,EAAI,IAAA,QAAA,CAAA;AAEJ,EAAI,IAAA,OAAO,YAAY,UACvB,EAAA;AACI,IAAW,QAAA,GAAA,OAAA,CAAA;AAAA,GAGf,MAAA;AACI,IAAA,QAAA,GAAW,OAAQ,CAAA,QAAA,CAAA;AACnB,IAAA,OAAA,GAAU,OAAQ,CAAA,OAAA,CAAA;AAClB,IAAA,SAAA,GAAY,QAAQ,SAAa,IAAA,IAAA,CAAA;AACjC,IAAA,QAAA,GAAW,OAAQ,CAAA,QAAA,CAAA;AAAA,GACvB;AAEA,EAAUC,mBAAA,CAAA,OAAO,QAAa,KAAA,UAAA,EAAY,sCAAsC,CAAA,CAAA;AAGhF,EAAAC,mDAAA,CAA0B,MAC1B;AACI,IAAA,IAAI,aACJ,EAAA;AACI,MAAA,MAAM,SAAS,GAAK,EAAA,MAAA,CAAA;AACpB,MAAA,MAAM,UAAa,GAAA,SAAA,CAAA;AACnB,MAAA,MAAM,eAAkB,GAAA,OAAA,CAAA;AACxB,MAAA,MAAM,gBAAmB,GAAA,QAAA,CAAA;AAEzB,MAAA,IAAI,aAAa,MACjB,EAAA;AACI,QAAO,MAAA,CAAA,GAAA,CAAI,QAAU,EAAA,OAAA,EAAS,QAAQ,CAAA,CAAA;AAAA,OAC1C;AAEA,MAAA,OAAO,MACP;AACI,QAAA,IAAI,UACJ,EAAA;AACI,UAAQ,MAAA,EAAA,MAAA,CAAO,kBAAkB,eAAe,CAAA,CAAA;AAAA,SACpD;AAAA,OACJ,CAAA;AAAA,KACJ;AAAA,GACD,EAAA;AAAA,IACC,QAAA;AAAA,IACA,OAAA;AAAA,IACA,SAAA;AAAA,IACA,aAAA;AAAA,IACA,QAAA;AAAA,GACH,CAAA,CAAA;AACL;;;;"}