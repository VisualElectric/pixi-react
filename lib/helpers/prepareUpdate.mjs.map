{"version":3,"file":"prepareUpdate.mjs","sources":["../../src/helpers/prepareUpdate.ts"],"sourcesContent":["import { diffProps } from './diffProps';\nimport { log } from './log';\n\nimport type { HostConfig } from '../typedefs/HostConfig';\nimport type { UpdatePayload } from '../typedefs/UpdatePayload';\n\nexport function prepareUpdate(\n    _instance: HostConfig['instance'],\n    _type: HostConfig['type'],\n    oldProps: HostConfig['props'],\n    newProps: HostConfig['props'],\n)\n{\n    log('info', 'lifecycle::prepareUpdate');\n\n    const updatePayload: UpdatePayload = {\n        shouldReconstruct: false,\n    };\n\n    const {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        children: newChildren,\n        ...newPropsRest\n    } = newProps;\n    const {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        children: oldChildren,\n        ...oldPropsRest\n    } = oldProps;\n\n    const diff = diffProps(newPropsRest, oldPropsRest, true);\n\n    if (diff.changes.length)\n    {\n        updatePayload.diff = diff;\n    }\n\n    return updatePayload;\n}\n"],"names":[],"mappings":";;;;AAMO,SAAS,aACZ,CAAA,SAAA,EACA,KACA,EAAA,QAAA,EACA,QAEJ,EAAA;AACI,EAAA,GAAA,CAAI,QAAQ,0BAA0B,CAAA,CAAA;AAEtC,EAAA,MAAM,aAA+B,GAAA;AAAA,IACjC,iBAAmB,EAAA,KAAA;AAAA,GACvB,CAAA;AAEA,EAAM,MAAA;AAAA;AAAA,IAEF,QAAU,EAAA,WAAA;AAAA,IACV,GAAG,YAAA;AAAA,GACH,GAAA,QAAA,CAAA;AACJ,EAAM,MAAA;AAAA;AAAA,IAEF,QAAU,EAAA,WAAA;AAAA,IACV,GAAG,YAAA;AAAA,GACH,GAAA,QAAA,CAAA;AAEJ,EAAA,MAAM,IAAO,GAAA,SAAA,CAAU,YAAc,EAAA,YAAA,EAAc,IAAI,CAAA,CAAA;AAEvD,EAAI,IAAA,IAAA,CAAK,QAAQ,MACjB,EAAA;AACI,IAAA,aAAA,CAAc,IAAO,GAAA,IAAA,CAAA;AAAA,GACzB;AAEA,EAAO,OAAA,aAAA,CAAA;AACX;;;;"}